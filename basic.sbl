# basic.sbl
# Basic language functions

# Reverses a local stack
!reverse {
    [] .st
    ^len 0 > loop {
        .@
        ^pop
        .popped st popped ^push
        .st
        ^len 0 >
    }
    .2
    st
}

#!
!reverse {
    [] .rev
    ^len 0 > loop {
        .@
        ^pop
        .old rev ^push
        .rev old ^len
        0 >
    }
    .@
    rev
}
!#

# Concatenates two local stacks
!concat {
    .first .second
    second !reverse .second
    second !len 0 > loop {
        .@
        second ^pop
        .item .second first item ^push
        .first second !len 0 >
    }
    .@
    first
}
